[gd_scene load_steps=23 format=2]

[ext_resource path="res://Images/Rooms/throneRoom.png" type="Texture" id=1]
[ext_resource path="res://Scenes/mainScene.tscn" type="PackedScene" id=2]
[ext_resource path="res://Scenes/item.tscn" type="PackedScene" id=3]
[ext_resource path="res://Images/People/kingActor.png" type="Texture" id=4]
[ext_resource path="res://Images/Items/vines.png" type="Texture" id=5]
[ext_resource path="res://Images/Portraits/king.png" type="Texture" id=6]
[ext_resource path="res://Images/People/guard.png" type="Texture" id=7]
[ext_resource path="res://Images/People/courtWIzard.png" type="Texture" id=8]
[ext_resource path="res://Images/Portraits/courtWizardFace.png" type="Texture" id=9]
[ext_resource path="res://Images/Items/sickle.png" type="Texture" id=10]
[ext_resource path="res://Images/Items/steelHelmet.png" type="Texture" id=11]
[ext_resource path="res://Images/Items/nes.png" type="Texture" id=12]
[ext_resource path="res://Images/Items/goldenEgg.png" type="Texture" id=13]

[sub_resource type="NavigationPolygon" id=1]
vertices = PoolVector2Array( 936.939, 319.413, 948.278, 303.034, 1125.93, 304.294, 1132.23, 539.899, 953.318, 354.691, 121.77, 546.199, 112.951, 458.004, 443.05, 389.969, 705.114, 432.806, 802.128, 408.867 )
polygons = [ PoolIntArray( 0, 1, 2, 3, 4 ), PoolIntArray( 3, 5, 6, 7, 8 ), PoolIntArray( 3, 8, 9 ), PoolIntArray( 3, 9, 4 ) ]
outlines = [ PoolVector2Array( 112.951, 458.004, 443.05, 389.969, 705.114, 432.806, 802.128, 408.867, 953.318, 354.691, 936.939, 319.413, 948.278, 303.034, 1125.93, 304.294, 1132.23, 539.899, 121.77, 546.199 ) ]

[sub_resource type="RectangleShape2D" id=2]
resource_local_to_scene = true
extents = Vector2( 41.123, 120.631 )

[sub_resource type="RectangleShape2D" id=3]
resource_local_to_scene = true
extents = Vector2( 63.473, 163.419 )

[sub_resource type="RectangleShape2D" id=4]
resource_local_to_scene = true
extents = Vector2( 69.837, 154.226 )

[sub_resource type="RectangleShape2D" id=5]
resource_local_to_scene = true
extents = Vector2( 73.5354, 152.603 )

[sub_resource type="Animation" id=6]
resource_name = "flicker"
length = 2.0
tracks/0/type = "value"
tracks/0/path = NodePath("../AlphusWizard/Light2D:energy")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 1, 2 ),
"transitions": PoolRealArray( 1, 1, 1 ),
"update": 0,
"values": [ 0.0, 3.0, 0.0 ]
}

[sub_resource type="RectangleShape2D" id=7]
resource_local_to_scene = true
extents = Vector2( 32.651, 32.6374 )

[sub_resource type="RectangleShape2D" id=8]
resource_local_to_scene = true
extents = Vector2( 32.651, 32.6374 )

[sub_resource type="RectangleShape2D" id=9]
resource_local_to_scene = true
extents = Vector2( 33.7213, 34.6663 )

[node name="castle" instance=ExtResource( 2 )]
canFastTravel = false

[node name="background" parent="." index="0"]
texture = ExtResource( 1 )

[node name="CollisionPolygon2D" parent="walkableArea" index="0"]
polygon = PoolVector2Array( 3.61066, 509.984, 319.851, 440.688, 571.835, 483.526, 837.678, 415.49, 830.119, 371.393, 828.859, 351.234, 1009.03, 352.494, 1021.63, 594.399, 11.1702, 599.438 )

[node name="NavigationPolygonInstance" parent="Navigation2D" index="0"]
navpoly = SubResource( 1 )

[node name="guardToCourtyard" parent="." index="4" instance=ExtResource( 3 )]
position = Vector2( 924.466, 282.436 )
image = ExtResource( 7 )
itemType = "door"
doorLocked = true
doorExit = "res://Rooms/courtYard.tscn"
doorLockedText = "The guard won't let you pass until you've talked with the Wizard."
doorUseText = "The guard shows you to the courtyard."

[node name="CollisionShape2D" parent="guardToCourtyard/Area2D" index="0"]
shape = SubResource( 2 )

[node name="Sprite" parent="guardToCourtyard" index="2"]
texture = ExtResource( 7 )

[node name="regularKing" parent="." index="5" instance=ExtResource( 3 )]
visible = false
position = Vector2( 344.514, 381.325 )
image = ExtResource( 4 )
itemType = "NPC"
viewText = [ "GAHHHHHH", "You!", "You saved me!", "You have done the kingdom and myself a great service.", "...", "You look like you are from a strange land.", "Ah!", "I have a strange gift for you! ", "Please take this grey box as a token of my thanks.", "Sweet!" ]
npcFace = ExtResource( 6 )
faceArray = [ 2, 2, 2, 2, 2, 2, 2, 2, 2, 1 ]

[node name="CollisionShape2D" parent="regularKing/Area2D" index="0"]
position = Vector2( 21.9203, -47.3762 )
shape = SubResource( 3 )

[node name="Sprite" parent="regularKing" index="2"]
position = Vector2( 23.6881, -47.3761 )
scale = Vector2( 1.37013, 1.37013 )
texture = ExtResource( 4 )

[node name="corruptKing" parent="." index="6" instance=ExtResource( 3 )]
position = Vector2( 344.514, 381.325 )
image = ExtResource( 4 )
itemType = "useable"
viewText = [ "The king is fast asleep, and covered in green vines.", "It would be funny if it weren't so sad." ]
reactionText = {
"powerGlove": [ "That's how you know you're screwed.", "A weapon of infinite power doesn't even work." ],
"saltPile": [ "Fam.", "Let's listen to the wizard, ya?" ],
"treeChunk": [ "You tap the blessed stick on the King, and..", "The spell begins to break!", "The vines melt away, and the king wakes up!" ],
"woodenOar": [ "You dumb noodle!", "That only works in Paris!" ]
}
powerSignals = [ "treeChunk" ]

[node name="CollisionShape2D" parent="corruptKing/Area2D" index="0"]
position = Vector2( 22.6274, -48.0833 )
shape = SubResource( 4 )

[node name="Sprite" parent="corruptKing" index="2"]
modulate = Color( 0.294118, 0.611765, 0.305882, 1 )
position = Vector2( 23.6881, -47.3762 )
scale = Vector2( 1.37013, 1.37013 )
texture = ExtResource( 4 )

[node name="Sprite2" type="Sprite" parent="corruptKing" index="7"]
position = Vector2( 21.5668, 11.3137 )
scale = Vector2( 1.31488, 1.31488 )
texture = ExtResource( 5 )

[node name="courtWizard" parent="." index="7" instance=ExtResource( 3 )]
position = Vector2( 703.483, 434.38 )
image = ExtResource( 8 )
itemType = "NPC"
viewText = [ "You...you're not from here, are you?", "No, I'm not.", "I mean, you're not from this world, are you?", "No, actually. I was playing video games and suddenly woke up in a dungeon! Can you help me get home?", "I hope so.", "I was the one who summoned you here.", "...", "Our wise and noble king, King Graham, has been cursed. The greatest heros in the land could not break the curse, ", "and this spell is unlike anything I've ever encountered. ", "Using my powers, I performed a ritual to summon heroes from across the Planes. So far, you have been the first I've encountered.", "How can I possibly help the king?! I'm just a guy..", "A guy...", "You know.", "I'm not even from this world!", "Well, you've gotten this far, haven't you? ", "I have faith in you..", "uh..", "what was your name..", "Well, if the fate of the kingdom rests on my shoulders, so be it!", "How can I help the king?", "He was cursed by my brother, an evil necromancer.", "Seek the hallowed grove and get a piece of the root from the Ancient Tree.", "To help you in this quest, I give you these gifts.", "First, a sickle. The wilds are full of greenery to cut through, and you will need this tool.", "Second, take this steel helmet. It will protect you on your mission.", "Godspeed adventurer! The fate of the kingdom lies with you!", "Cool." ]
npcFace = ExtResource( 9 )
faceArray = [ 2, 1, 2, 1, 2, 2, 1, 2, 2, 2, 1, 1, 1, 1, 2, 2, 2, 2, 1, 1, 2, 2, 2, 2, 2, 2, 1 ]

[node name="CollisionShape2D" parent="courtWizard/Area2D" index="0"]
position = Vector2( -8.67645, -75.4185 )
shape = SubResource( 5 )

[node name="Sprite" parent="courtWizard" index="2"]
position = Vector2( -6.60715, -94.3874 )
scale = Vector2( 1.53093, 1.53093 )
texture = ExtResource( 8 )

[node name="walkPos" parent="courtWizard" index="3"]
position = Vector2( -168.484, 84.5383 )

[node name="courtWizard2" parent="." index="8" instance=ExtResource( 3 )]
visible = false
position = Vector2( 703.483, 434.38 )
image = ExtResource( 8 )
itemType = "NPC"
viewText = [ "We have no time to waste!", "Seek the Ancient Tree in the grove!" ]
reactionText = {
}
npcFace = ExtResource( 9 )
faceArray = [ 2, 2 ]

[node name="CollisionShape2D" parent="courtWizard2/Area2D" index="0"]
shape = SubResource( 5 )

[node name="Sprite" parent="courtWizard2" index="2"]
position = Vector2( -6.60715, -94.3874 )
scale = Vector2( 1.53093, 1.53093 )
texture = ExtResource( 8 )

[node name="walkPos" parent="courtWizard2" index="3"]
position = Vector2( -168.484, 84.5383 )

[node name="AnimationPlayer" parent="courtWizard2" index="5"]
anims/flicker = SubResource( 6 )

[node name="castleStory" parent="." index="9" instance=ExtResource( 3 )]
position = Vector2( -231.895, 53.5143 )
itemType = "story"
viewText = [ "The throne room of King Graham is silent as you enter. A tall, gaunt figure in the garbs of a wizard stands near the king.", "He looks up at you as you enter, and raises his standard issue bushy wizard eyebrows.", "The King is sound asleep, and snoring loudly. He is covered in green vines and plants, and as you watch, the vines seem to writhe and grow faster." ]

[node name="sickle" parent="." index="10" instance=ExtResource( 3 )]
position = Vector2( -199, 333 )
image = ExtResource( 10 )
itemType = "pickup"

[node name="CollisionShape2D" parent="sickle/Area2D" index="0"]
shape = SubResource( 7 )

[node name="steelHelmet" parent="." index="11" instance=ExtResource( 3 )]
position = Vector2( -200, 202 )
image = ExtResource( 11 )
itemType = "pickup"

[node name="CollisionShape2D" parent="steelHelmet/Area2D" index="0"]
shape = SubResource( 8 )

[node name="player" parent="." index="12"]
position = Vector2( 898.606, 480.285 )

[node name="nes" parent="." index="13" instance=ExtResource( 3 )]
position = Vector2( -153.71, -27.7183 )
image = ExtResource( 12 )
itemType = "pickup"

[node name="goldenEgg" parent="." index="14" instance=ExtResource( 3 )]
position = Vector2( 28.5726, 575.432 )
image = ExtResource( 13 )
itemType = "pickup"
viewText = [ "It's a egg, made out of gold!", "Cool." ]

[node name="CollisionShape2D" parent="goldenEgg/Area2D" index="0"]
shape = SubResource( 9 )

[node name="Sprite" parent="goldenEgg" index="2"]
texture = ExtResource( 13 )

[connection signal="activateSignal" from="regularKing" to="nes" method="pickup"]
[connection signal="powerSignal" from="corruptKing" to="regularKing" method="showItem"]
[connection signal="powerSignal" from="corruptKing" to="corruptKing" method="hideItem"]
[connection signal="activateSignal" from="courtWizard" to="guardToCourtyard" method="unlockDoor"]
[connection signal="activateSignal" from="courtWizard" to="courtWizard2" method="showItem"]
[connection signal="activateSignal" from="courtWizard" to="courtWizard" method="hideItem"]
[connection signal="activateSignal" from="courtWizard" to="sickle" method="pickup"]
[connection signal="activateSignal" from="courtWizard" to="steelHelmet" method="pickup"]

[editable path="guardToCourtyard"]
[editable path="regularKing"]
[editable path="corruptKing"]
[editable path="courtWizard"]
[editable path="courtWizard2"]
[editable path="sickle"]
[editable path="steelHelmet"]
[editable path="goldenEgg"]
