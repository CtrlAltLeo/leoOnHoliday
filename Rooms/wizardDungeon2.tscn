[gd_scene load_steps=12 format=2]

[ext_resource path="res://Images/Rooms/dungeon2.png" type="Texture" id=1]
[ext_resource path="res://Scenes/mainScene.tscn" type="PackedScene" id=2]
[ext_resource path="res://Scenes/item.tscn" type="PackedScene" id=3]
[ext_resource path="res://Scenes/logicCounter.tscn" type="PackedScene" id=4]
[ext_resource path="res://Images/Items/mileMarker.png" type="Texture" id=5]

[sub_resource type="NavigationPolygon" id=1]
vertices = PoolVector2Array( 399.219, 254.451, 857.424, 241.723, 1138.85, 535.88, 102.234, 524.566 )
polygons = [ PoolIntArray( 0, 1, 2, 3 ) ]
outlines = [ PoolVector2Array( 399.219, 254.451, 857.424, 241.723, 1138.85, 535.88, 102.234, 524.566 ) ]

[sub_resource type="RectangleShape2D" id=2]
resource_local_to_scene = true
extents = Vector2( 41.6417, 83.7694 )

[sub_resource type="Animation" id=3]
resource_name = "flicker"
length = 2.0
tracks/0/type = "value"
tracks/0/path = NodePath("../AlphusWizard/Light2D:energy")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 1, 2 ),
"transitions": PoolRealArray( 1, 1, 1 ),
"update": 0,
"values": [ 0.0, 3.0, 0.0 ]
}

[sub_resource type="Animation" id=4]
resource_name = "flicker"
length = 2.0
tracks/0/type = "value"
tracks/0/path = NodePath("../AlphusWizard/Light2D:energy")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 1, 2 ),
"transitions": PoolRealArray( 1, 1, 1 ),
"update": 0,
"values": [ 0.0, 3.0, 0.0 ]
}

[sub_resource type="Animation" id=5]
resource_name = "flicker"
length = 2.0
tracks/0/type = "value"
tracks/0/path = NodePath("../AlphusWizard/Light2D:energy")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 1, 2 ),
"transitions": PoolRealArray( 1, 1, 1 ),
"update": 0,
"values": [ 0.0, 3.0, 0.0 ]
}

[sub_resource type="RectangleShape2D" id=6]
resource_local_to_scene = true
extents = Vector2( 33.3437, 53.2454 )

[node name="wizardDungeon2" instance=ExtResource( 2 )]
canFastTravel = false

[node name="background" parent="." index="0"]
texture = ExtResource( 1 )

[node name="CollisionPolygon2D" parent="walkableArea" index="0"]
polygon = PoolVector2Array( 2.94769, 543.71, 295.69, 313.193, 743.996, 306.122, 1045.22, 567.752, 1026.84, 597.45, -5.5376, 596.036 )

[node name="NavigationPolygonInstance" parent="Navigation2D" index="0"]
position = Vector2( -109.013, 51.3246 )
navpoly = SubResource( 1 )

[node name="player" parent="." index="4"]
position = Vector2( 519.515, 514.728 )

[node name="dugneon2Story" parent="." index="5" instance=ExtResource( 3 )]
position = Vector2( -403.051, 33.5269 )
itemType = "story"
viewText = [ "The same voice whispers into your mind,", "\"You could go any way you wish..\"", "..." ]

[node name="logicCounter" parent="." index="6" instance=ExtResource( 4 )]
position = Vector2( -311.846, 398.749 )
targetValue = 4
order = [ "door2", "door4", "door3", "door1" ]

[node name="door1" parent="." index="7" instance=ExtResource( 3 )]
position = Vector2( -199.798, 114.491 )
itemType = "view"
viewText = [ "He was mistaken. ", "The dark brother challenged him to a duel, to which he hestitantly accepted.", "The fight raged on for a day, and neither could gain the upper hand.", "But the dark brother, made bitter by his evil studies, cursed the king of the land.", "The light brother could not save the king, and so he banished the dark brother to this lonely tower.", "Where he still remains.." ]
doorLocked = true
doorLockedText = ""
doorUseText = "You walk through the door to a new room."

[node name="CollisionShape2D" parent="door1/Area2D" index="0"]
position = Vector2( 392.81, 165.458 )
shape = SubResource( 2 )

[node name="walkPos" parent="door1" index="3"]
position = Vector2( 467.414, 262.605 )

[node name="door2" parent="." index="8" instance=ExtResource( 3 )]
position = Vector2( -197.553, 118.165 )
itemType = "view"
viewText = [ "Once upon a time, there were two brothers..", "The brothers showed great potential to become spellcasters." ]
reactionText = {
}

[node name="CollisionShape2D" parent="door2/Area2D" index="0"]
position = Vector2( 616.741, 103.456 )
shape = SubResource( 2 )

[node name="walkPos" parent="door2" index="3"]
position = Vector2( 628.414, 240.605 )

[node name="AnimationPlayer" parent="door2" index="5"]
anims/flicker = SubResource( 3 )

[node name="door3" parent="." index="9" instance=ExtResource( 3 )]
position = Vector2( -195.665, 120.053 )
itemType = "view"
viewText = [ "As the years passed, the brothers grew farther appart. As time marched on, their powers grew.", "The brother of Light thought that they could both live in peace until death." ]
reactionText = {
}

[node name="CollisionShape2D" parent="door3/Area2D" index="0"]
position = Vector2( 808.798, 95.1314 )
shape = SubResource( 2 )

[node name="walkPos" parent="door3" index="3"]
position = Vector2( 808.414, 224.605 )

[node name="AnimationPlayer" parent="door3" index="5"]
anims/flicker = SubResource( 4 )

[node name="door4" parent="." index="10" instance=ExtResource( 3 )]
position = Vector2( -199.441, 120.052 )
itemType = "view"
viewText = [ "One brother decided to study the magic of Life and Healing, so he could save their dying Mother.", "The other brother chose the path of Necromancy, so he wouldn't have to fear death.." ]
reactionText = {
}

[node name="CollisionShape2D" parent="door4/Area2D" index="0"]
position = Vector2( 1027.02, 156.375 )
shape = SubResource( 2 )

[node name="walkPos" parent="door4" index="3"]
position = Vector2( 950.414, 256.605 )

[node name="AnimationPlayer" parent="door4" index="5"]
anims/flicker = SubResource( 5 )

[node name="lever" parent="." index="11" instance=ExtResource( 3 )]
visible = false
position = Vector2( 0, -4 )
image = ExtResource( 5 )
itemType = "door"
doorExit = "res://Rooms/wizardDungeon3.tscn"
doorUseText = "You place a hand on the pillar, and are transported to another room."

[node name="CollisionShape2D" parent="lever/Area2D" index="0"]
position = Vector2( 521.403, 331.148 )
shape = SubResource( 6 )

[node name="Sprite" parent="lever" index="2"]
position = Vector2( 526.223, 342.085 )
scale = Vector2( 0.460532, 0.460532 )
texture = ExtResource( 5 )

[node name="walkPos" parent="lever" index="3"]
position = Vector2( 527.341, 432.351 )

[connection signal="True" from="logicCounter" to="lever" method="showItem"]
[connection signal="sendName" from="door1" to="logicCounter" method="getName"]
[connection signal="sendName" from="door2" to="logicCounter" method="getName"]
[connection signal="sendName" from="door3" to="logicCounter" method="getName"]
[connection signal="sendName" from="door4" to="logicCounter" method="getName"]

[editable path="door1"]
[editable path="door2"]
[editable path="door3"]
[editable path="door4"]
[editable path="lever"]
